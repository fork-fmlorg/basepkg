<h1>basepkg</h1>

<p>NetBSD system packages like as PkgBase (FreeBSD).</p>

<p>Please contact to Yuuki Enomoto (uki@e-yuuki.org) 
for bug-report, question, discussion and others.</p>

<h2>How to use</h2>

<h3>1. Build the NetBSD distribution</h3>

<p>In this procedure, 
NetBSD source sets is in <strong>/usr/src</strong>, 
NetBSD build-tools is in <strong>/usr/tools</strong>, 
NetBSD compiled objects is in <strong>/usr/obj</strong>, 
and NetBSD Version is 7.1.2, machine is amd64, machine archtecture is x86_64.</p>

<p>First, download NetBSD source sets and extract to /usr/src.
Then, build it.</p>

<pre><code># cd /
# ftp ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-7.1.2/source/
ftp&gt; mget *.tgz
ftp&gt; bye
# ls | grep 'tgz$' | xargs -n 1 tar zxf
# ls | grep 'tgz$' | xargs rm
# mkdir /usr/obj /usr/tools
# cd /usr/src
# ./build.sh -O ../obj -T ../tools -x -X ../xsrc tools
# ./build.sh -O ../obj -T ../tools -x -X ../xsrc distribution
</code></pre>

<h3>2. Install pkgtools/pkg_install</h3>

<pre><code># cd /usr
# ftp ftp://ftp.netbsd.org/pub/pkgsrc/stable/pkgsrc.tar.gz
# tar zxf pkgsrc.tar.gz
# rm pkgsrc.tar.gz
# cd pkgsrc/pkgtools/pkg_install
# make install clean clean-depen
</code></pre>

<p>or <code>pkgin install pkg_install</code> for <strong>pkgtools/pkg_install</strong>.</p>

<h3>3. Run basepkg.sh for packages</h3>

<p>Run <code>basepkg.sh</code>(1) with <code>pkg</code> and <code>kern</code> option.</p>

<pre><code># ./basepkg.sh pkg
# ./basepkg.sh kern
</code></pre>

<p>Packages are created under the 
<strong>packages/<release-version>/<machine>-<machine\_arch></strong> directory.</p>

<h3>4. How to install package?</h3>

<p>Running <code>pkg\_add</code>(1) with <code>-K /var/db/basepkg</code> for 
separate database from pkgsrc.</p>

<pre><code># pkg_add -K /var/db/basepkg games-games-bin-7.1.tgz
</code></pre>

<p>Contents installed to the system.</p>

<p>But etc categorized packages are exception.
They are installed to <strong>/var/tmp/basepkg</strong> because the way keeps from 
overwrite existing files under the <strong>/etc</strong>.
If you want to update the configuration files, 
please run <code>etcupdate</code>(8) manually.</p>

<pre><code># etcupdate -s /var/tmp/basepkg
</code></pre>

<h3>5. pkgsrc-wip</h3>

<p>Basepkg imported to pkgsrc-wip.
You can install basepkg to your system through pkgsrc-wip.
But it supporting only latest version package.</p>

<pre><code># cd /usr/pkgsrc/wip/basepkg
# make install clean clean-depends
</code></pre>

<p><code>basepkg.sh</code>(1), README and others are installed to 
<strong>/usr/pkg/basepkg</strong> directory.</p>
